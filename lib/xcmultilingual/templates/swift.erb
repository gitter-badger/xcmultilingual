//
//  <%= @filename %>
//  xcmultilingual
//
//  Created by xcmultilingual on <%= Time.now %>.
//
//

import Foundation

struct <%= @name %> {
<% @bundle_data.each do |bundle| -%>
<% nsbundle = bundle.name ? "Multilingual.bundle(\"#{bundle.path}\", removeLast: 1)" : "NSBundle.mainBundle()" -%>
<% prefix = bundle.name.capitalize unless bundle.name.nil? -%>
<% bundle.tables.each do |table| -%>
    enum <%= prefix %><%= table.name %>: String {
<% table.keys.each do |key| -%>
        case <%= key %> = "<%= key %>"
<% end # keys -%>

        func string() -> String {
            return NSLocalizedString(rawValue, tableName: "<%= table.name %>", bundle: <%= nsbundle %>, value: "\(rawValue)", comment: "")
        }
    }

<%- end # table -%>
<%- end # bundle -%>

    private static func bundle(path: String, removeLast count: Int) -> NSBundle {
        var components = (__FILE__ as String).pathComponents
        for i in 0...count { let n = components.removeLast() }
        let bundlePath = join("/", components) + path
        return NSBundle(path: bundlePath) ?? NSBundle.mainBundle()
    }
}
